version: '2.1.{build}'
image: Visual Studio 2017

clone_depth: 1

build_script:
    - cmd: dotnet pack -p:PackageVersion=%APPVEYOR_BUILD_VERSION%
    - cmd: dotnet pack -c Release -p:PackageVersion=%APPVEYOR_BUILD_VERSION%
	
 #   - cmd: dotnet test -p:PackageVersion=%APPVEYOR_BUILD_VERSION% test/NUnit.Xml.TestLogger.UnitTests/NUnit.Xml.TestLogger.UnitTests.csproj
 #   - cmd: dotnet test -p:PackageVersion=%APPVEYOR_BUILD_VERSION% test/NUnit.Xml.TestLogger.AcceptanceTests/NUnit.Xml.TestLogger.AcceptanceTests.csproj

- cmd: dotnet restore ./appveyor.netcore/NUnitTestProject1/NUnitTestProject1.csproj --verbosity m
- cmd: cd tests
- cmd: dotnet nunit


#.\packages\OpenCover.4.6.519\tools\OpenCover.Console.exe -register:user -target:".\packages\xunit.runner.console.2.4.1\tools\net471\xunit.console.x86.exe" -targetargs:".\UnitTests\bin\Debug\UnitTests.dll -noshadow" -filter:"+[LeedCodeLib*]* -[UnitTests*]*" -output:".\MyProject_coverage.xml"
test_script:

#upload report
#- .\packages\Codecov.1.1.0\tools\codecov.exe -f "MyProject_coverage.xml"